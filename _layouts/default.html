<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en' }}" data-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <!-- Primary Meta Tags -->
  <title>{% if page.title %}{{ page.title | escape }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  <meta name="title" content="{% if page.title %}{{ page.title | escape }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
  <meta name="description" content="{% if page.description %}{{ page.description | escape }}{% else %}{{ site.description | escape }}{% endif %}">
  <meta name="author" content="{{ site.company.name | default: 'DigitalMeld' }}">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  <meta property="og:title" content="{% if page.title %}{{ page.title | escape }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
  <meta property="og:description" content="{% if page.description %}{{ page.description | escape }}{% else %}{{ site.description | escape }}{% endif %}">
  <meta property="og:image" content="{{ page.image | default: '/assets/images/og-image.png' | absolute_url }}">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
  <meta property="og:site_name" content="{{ site.title | escape }}">
  <meta property="og:locale" content="{{ site.lang | default: 'en_US' }}">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@{{ site.twitter.username }}">
  <meta name="twitter:creator" content="@{{ site.twitter.username }}">
  <meta name="twitter:url" content="{{ page.url | absolute_url }}">
  <meta name="twitter:title" content="{% if page.title %}{{ page.title | escape }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
  <meta name="twitter:description" content="{% if page.description %}{{ page.description | escape }}{% else %}{{ site.description | escape }}{% endif %}">
  <meta name="twitter:image" content="{{ page.image | default: '/assets/images/og-image.png' | absolute_url }}">
  <meta name="twitter:image:alt" content="{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}">
  
  <!-- Additional SEO Meta Tags -->
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="googlebot" content="index, follow">
  {% if page.keywords %}<meta name="keywords" content="{{ page.keywords | join: ', ' }}">{% endif %}
  
  <!-- Article specific meta tags -->
  {% if page.date %}
  <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
  <meta property="article:author" content="{{ site.author }}">
  {% endif %}
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="{{ '/assets/images/favicon.svg' | relative_url }}">
  <link rel="icon" type="image/x-icon" href="{{ '/assets/images/favicon.ico' | relative_url }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/images/apple-touch-icon.png' | relative_url }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/images/favicon-32x32.png' | relative_url }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/images/favicon-16x16.png' | relative_url }}">
  
  <!-- Preconnect to external domains for performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="{{ page.url | absolute_url }}">
  
  <!-- RSS Feed -->
  {% feed_meta %}
  
  <!-- Jekyll SEO Tag -->
  {% seo %}
  
  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "{{ site.company.name }}",
    "alternateName": "{{ site.company.name }}.ai",
    "url": "{{ site.url }}",
    "logo": "{{ '/assets/images/logo.png' | absolute_url }}",
    "description": "{{ site.description | escape }}",
    "foundingDate": "2024",
    "industry": "Artificial Intelligence",
    "knowsAbout": [
      "Artificial Intelligence",
      "Machine Learning",
      "Computer Vision",
      "Edge Computing",
      "Industrial Safety",
      "Real-time Monitoring",
      "Predictive Analytics"
    ],
    "sameAs": [
      "https://twitter.com/digitalmeld",
      "https://linkedin.com/company/digitalmeld",
      "https://github.com/digitalmeld",
      "https://digitalmeld.io"
    ],
    "contactPoint": {
      "@type": "ContactPoint",
      "telephone": "+1-555-012-3456",
      "contactType": "Customer Service",
      "email": "{{ site.company.email }}",
      "availableLanguage": "English"
    },
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "US"
    },
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "AI Solutions",
      "itemListElement": [
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "SoftwareApplication",
            "name": "Rubicon Safety",
            "description": "AI-powered safety monitoring for industrial environments",
            "applicationCategory": "Industrial Safety Software",
            "operatingSystem": "Web-based"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "SoftwareApplication",
            "name": "Rubicon Safety for Public Sector",
            "description": "Situational awareness and incident response for public sector",
            "applicationCategory": "Public Safety Software",
            "operatingSystem": "Web-based"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "SoftwareApplication",
            "name": "Rubicon Perception",
            "description": "Data transformation and predictive analytics",
            "applicationCategory": "Analytics Software",
            "operatingSystem": "Web-based"
          }
        }
      ]
    }
  }
  </script>
  
  {% if page.url == "/" %}
  <!-- Website Schema for Homepage -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ site.title }}",
    "url": "{{ site.url }}",
    "description": "{{ site.description | escape }}",
    "publisher": {
      "@type": "Organization",
      "name": "{{ site.company.name }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ '/assets/images/logo.png' | absolute_url }}"
      }
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "{{ site.url }}/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  
  <!-- Software Application Schema for Rubicon -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Rubicon",
    "description": "AI-powered operational intelligence platform for real-time monitoring and analytics at the edge",
    "url": "{{ site.url }}",
    "applicationCategory": "Industrial Software",
    "operatingSystem": "Web-based",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD",
      "availability": "https://schema.org/InStock",
      "description": "Contact for pricing"
    },
    "creator": {
      "@type": "Organization",
      "name": "{{ site.company.name }}",
      "url": "{{ site.url }}"
    },
    "featureList": [
      "Real-time AI monitoring",
      "PPE compliance detection",
      "Fire and smoke detection",
      "Methane gas monitoring",
      "Zone security tracking",
      "Predictive analytics",
      "Edge computing support",
      "Multi-tenant architecture"
    ],
    "screenshot": "{{ '/assets/images/rubicon-dashboard.jpg' | absolute_url }}",
    "softwareVersion": "1.0",
    "datePublished": "2024-01-01",
    "dateModified": "{{ site.time | date_to_xmlschema }}"
  }
  </script>
  {% endif %}
  
  <!-- Theme color for mobile browsers -->
  <meta name="theme-color" content="#8B5CF6">
  <meta name="msapplication-TileColor" content="#8B5CF6">
  
  <!-- Prevent FOUC (Flash of Unstyled Content) -->
  <script>
    // Check for saved theme preference or default to dark mode
    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
  </script>
</head>

<body>
  
  <!-- Header Navigation -->
  {% include header.html %}
  
  <!-- Main Content -->
  <main id="main-content" role="main">
    {{ content }}
  </main>
  
  <!-- Footer -->
  {% include footer.html %}
  
  <!-- Theme Management JavaScript -->
  <script src="{{ '/assets/js/theme.js' | relative_url }}"></script>
  
  <!-- Navigation JavaScript -->
  <script src="{{ '/assets/js/navigation.js' | relative_url }}"></script>
  
  <!-- Lazy Loading JavaScript -->
  <script src="{{ '/assets/js/lazy-loading.js' | relative_url }}"></script>
  
  <!-- Accessibility JavaScript -->
  <script src="{{ '/assets/js/accessibility.js' | relative_url }}"></script>
  
  <!-- Performance Monitoring JavaScript -->
  <script src="{{ '/assets/js/performance.js' | relative_url }}"></script>
  
  <!-- Analytics JavaScript -->
  <script src="{{ '/assets/js/analytics.js' | relative_url }}"></script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('{{ "/assets/js/sw.js" | relative_url }}')
          .then(function(registration) {
            console.log('[SW] Service Worker registered successfully:', registration);
            
            // Check for updates
            registration.addEventListener('updatefound', function() {
              const newWorker = registration.installing;
              newWorker.addEventListener('statechange', function() {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  // New service worker is available
                  if (confirm('A new version is available. Refresh to update?')) {
                    window.location.reload();
                  }
                }
              });
            });
          })
          .catch(function(registrationError) {
            console.warn('[SW] Service Worker registration failed:', registrationError);
          });
      });
    }
  </script>

  <!-- Analytics -->
  {% if jekyll.environment == 'production' %}
    {% include google-analytics.html %}
  {% endif %}
</body>
</html>